<!-- header + breadcrumbs left as you had -->
<app-header></app-header>
<app-logged-in-user></app-logged-in-user>

<div class="flex gap-2 p-3 bg-red-200">
  <a routerLink="">Home</a><span class="ml-2 mr-2">/</span>
  <a routerLink="/works">Works</a><span class="ml-2 mr-2">/</span>
  <a routerLink="worktype">Work Type</a>
</div>

<!-- table -->
<div class="mat-elevation-z8 border rounded m-2 p-2 bg-white">
  <table mat-table [dataSource]="dataSource" class="min-w-full">

    <!-- Position Column -->
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Sr.No.</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">{{element.position}}</td>
    </ng-container>

    <!-- Work Type -->
    <ng-container matColumnDef="workType">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Work Type</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">{{element.workType}}</td>
    </ng-container>

    <!-- Work Type Code -->
    <ng-container matColumnDef="workTypeCode">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Work Type Code</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">{{element.workTypeCode}}</td>
    </ng-container>

    <!-- Is Important -->
    <ng-container matColumnDef="isImportant">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Is Important</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">
        <span *ngIf="element.isImportant" class="text-green-600 font-semibold">Yes</span>
        <span *ngIf="!element.isImportant" class="text-gray-500">No</span>
      </td>
    </ng-container>

    <!-- Edit -->
    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Edit</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">
        <button (click)="openEditModal(element)" class="p-2 rounded hover:bg-blue-600 hover:text-white transition">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Delete -->
    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef class="text-left py-2 px-3">Delete</th>
      <td mat-cell *matCellDef="let element" class="py-2 px-3">
        <button (click)="openDeleteModal(element)" class="p-2 rounded hover:bg-red-600 hover:text-white transition">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons class="mt-4">
  </mat-paginator>
</div>

<!-- ===================== EDIT MODAL ===================== -->
<div
  *ngIf="editModalOpen"
  class="fixed inset-0 z-50 flex items-center justify-center"
  aria-modal="true"
  role="dialog"
>
  <!-- backdrop -->
  <div class="absolute inset-0 bg-black/50" (click)="closeEditModal()"></div>

  <!-- modal content -->
  <div class="relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 p-6 z-10">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold">Edit Work Type</h3>
      <button (click)="closeEditModal()" class="text-gray-500 hover:text-gray-800">&times;</button>
    </div>

    <form [formGroup]="editForm" (ngSubmit)="saveEdit()" class="space-y-4">
      <div>
        <label class="block text-sm text-gray-600">Sr. No.</label>
        <input type="text" formControlName="position" class="w-full mt-1 p-2 border rounded bg-gray-100" />
      </div>

      <div>
        <label class="block text-sm text-gray-600">Work Type</label>
        <input type="text" formControlName="workType" class="w-full mt-1 p-2 border rounded" />
        <div *ngIf="editForm.get('workType')?.touched && editForm.get('workType')?.invalid" class="text-red-600 text-sm mt-1">
          Work Type is required
        </div>
      </div>

      <div>
        <label class="block text-sm text-gray-600">Work Type Code</label>
        <input type="text" formControlName="workTypeCode" class="w-full mt-1 p-2 border rounded" />
        <div *ngIf="editForm.get('workTypeCode')?.touched && editForm.get('workTypeCode')?.invalid" class="text-red-600 text-sm mt-1">
          Work Type Code is required
        </div>
      </div>

      <div class="flex items-center gap-2">
        <input type="checkbox" formControlName="isImportant" id="isImportant" class="h-4 w-4" />
        <label for="isImportant" class="text-sm text-gray-700">Is Important</label>
      </div>

      <div class="flex justify-end gap-3 mt-2">
        <button type="button" (click)="closeEditModal()" class="px-4 py-2 rounded border">Cancel</button>
        <button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- ===================== DELETE MODAL ===================== -->
<div
  *ngIf="deleteModalOpen"
  class="fixed inset-0 z-50 flex items-center justify-center"
  aria-modal="true"
  role="dialog"
>
  <div class="absolute inset-0 bg-black/50" (click)="closeDeleteModal()"></div>

  <div class="relative bg-white rounded-lg shadow-lg w-full max-w-sm mx-4 p-6 z-10">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold">Confirm Delete</h3>
      <button (click)="closeDeleteModal()" class="text-gray-500 hover:text-gray-800">&times;</button>
    </div>

    <p class="text-sm text-gray-700 mb-6">
      Are you sure you want to delete
      <span class="font-semibold" *ngIf="selectedRow">"{{ selectedRow!.workType }}"</span>
    </p>

    <div class="flex justify-end gap-3">
      <button type="button" (click)="closeDeleteModal()" class="px-4 py-2 rounded border">Cancel</button>
      <button type="button" (click)="confirmDelete()" class="px-4 py-2 rounded bg-red-600 text-white">Delete</button>
    </div>
  </div>
</div>
